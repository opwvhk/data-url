![Build Status](https://github.com/opwvhk/data-url/workflows/Java%20CI%20with%20Maven/badge.svg)
[![license](license-APACHE-2.0-brightgreen.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)

# data-url

Support for `data:` URLs for JVM languages.


## Rationale

By default, the Java class `java.net.URL` does not support `data:` URLs (specified in [RFC 2397](https://www.ietf.org/rfc/rfc2397.txt)).

As a result, code snippets like this throw a `MalformedURLException` (unknown protocol) on the first line:

```java
java.net.URL url = new java.net.URL("data:image/png;base64,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");
java.awt.image.BufferedImage image = javax.imageio.ImageIO.read(URL);
```

## Usage

This library hooks into the Java ServiceLoader architecture for URL stream handlers and provides support for `data:` URLs.
To use it, simply add it to the classpath.

For e.g. Maven, this means adding this dependency:

```xml
<dependency>
	<groupId>net.fs.opk</groupId>
	<artifactId>data-url</artifactId>
	<version>1.0</version>
</dependency>
```

With this dependency on the classpath, the code snippet above succeeds, and reads an image:

![smiley](data:image/png;base64,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)
